{% import 'wtf_tinymce/editor.html' as tinymce with context %}
<html>
	<head>
	<title>Lesson |</title>
	{{ codemirror.include_codemirror() }}
	<meta charset="utf-8">
  	
	<meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
 <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>	
		
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>

	<script>
    $(document).ready(function() {
        $('form').submit(function (e) {
            var url = "/dashboard/excercise/post/";
            $.ajax({
                type: "POST",
                url: url,
                data: $('form').serialize(),
                success: function (data) {
                        var obj = JSON.parse(JSON.stringify(data));
                        console.log(obj.data.message);
                        console.log(eval(obj.data));
                        $("#results").html(obj.data.message);
                        document.getElementById('output').contentWindow.document.write(obj.data.message);
			document.getElementById('output').contentWindow.document.close();
                }
            });
            e.preventDefault();
        });

        $.ajaxSetup({
            beforeSend: function(xhr, settings) {
                if (!/^(GET|HEAD|OPTIONS|TRACE)$/i.test(settings.type) && !this.crossDomain) {
                    xhr.setRequestHeader("X-CSRFToken", "{{ form.csrf_token._value() }}")
                }
            }
        })
    });
</script>
	</head>
<style>
body, html 
{
	width: 100%;
	height: 100%;
	overflow: hidden;
}
.button {
    background-color: #4CAF50;
	border: none;
    color: white;
    padding: 10px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 17px;
    margin: 4px 2px;
    cursor: pointer;
	    position: relative;
    left: 465px;
    bottom: 400px;
	}
.container 
{
	width: 100%;
	height: 100%
}
.top
{
	padding-top:5px;
	right:30px;
}
.middle
{
	width:35%;
	left: 180px;
	height:80%;
	float:left;
}
.right
{
	position: relative;
	top: -25px;
	left: 260px;
	width:55%;
	height:100%;
	float:right;
}
.CodeMirror
{
        height:100%;
	background-color: white;
}
.message
{
	position: absolute;
	left: 750px;
	bottom: 17px;
	font-size: 18px;
}
</style>
<body>

<nav class="navbar navbar-expand-sm navbar-dark" style="background-color: #3E4551;">
  <a class="navbar-brand" href="#">LEARN</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav ml-auto">
      <li class="nav-item active">
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		{{username.username}} 
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
		<a class="dropdown-item" href="/dashboard/{{username.username}}">Dashboard</a>
          <a class="dropdown-item" href="/logout/">Logout</a>
        </div>
      </li>
    </ul>
  </div>
</nav>

	

	
<div class="container">
<div class='top'>
	<h2>Excercise Template</h2>
	<p>Welcome {{username.username}}</p>
	<h6>Filler text currently however this will be a task for the user to complete. Underneath there will be checkboxes, which when the user inputs and runs certain code, the checkbox should tick, indicating to the student that the task has been completed</h6>
</div>
<div class="middle">
	<form method='POST' action="">
                {{ form.csrf_token }}
		<h5>Edit Code</h5>
		{{ form.source_code }}
                <div>
			<input type="submit" class="button" value="Run Code >>" />
			<div class="message">
		{% with messages = get_flashed_messages() %}
        {% if messages %}
                {% for message in messages %}
                <p>{{ message }}</p>
                {% endfor %}
        {% endif %}
        {% endwith %}
	</div>
		</div>
        </form>
</div>
<div class="right">
<iframe id="output"style="height:470px; width:400px;"></iframe>
</body>
</html>
